var __spreadArrays =
  (this && this.__spreadArrays) ||
  function() {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++)
      s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
        r[k] = a[j];
    return r;
  };

function reducer(state, action) {
  if (typeof state === "undefined") {
    state = [];
  }
  switch (action.type) {
    case "ADD_COLOR": {
      const id = Math.floor(Math.random() * 100000);
      return __spreadArrays([{ id: id, hex: action.hex }], state);
    }
    case "DELETE_COLOR": {
      let index;
      for (let el in state) {
        if (state[el].id === action.id) {
          index = el;
        }
      }
      return __spreadArrays(
        state.slice(0, index),
        state.slice(Number(index) + 1)
      );
    }
    default:
      return state;
  }
}
function deleteElement(className) {
  let deleteElement = document.getElementsByClassName(className);
  while (deleteElement.length) {
    deleteElement[0].parentNode.removeChild(deleteElement[0]);
  }
}

const store = Redux.createStore(reducer);

function rgb2hex(r, g, b) {
  return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
}

let colorSvg =
  '<svg class="colorSvg" width="151" height="105" viewBox="0 0 151 105" fill="none" xmlns="http://www.w3.org/2000/svg">\n' +
  '<path fill="currentColor" d="M88.3989 103.328L89.4316 103.7L92.5503 105C93.1699 104.629 94.2026 104.443 94.2026 104.629C94.2026 104.814 95.4418 104.443 96.0615 104.443C96.6811 104.257 97.7138 104.257 98.7465 104.071L99.5726 104.257L100.192 104.443C101.018 104.257 102.464 103.7 102.671 103.886C102.877 104.071 105.356 103.514 106.182 103.514C107.008 103.514 108.66 103.328 109.073 103.328C109.28 103.328 110.726 103.7 111.139 103.514C111.552 103.328 112.585 103.328 113.411 103.328L114.03 102.957C114.443 102.957 115.27 102.771 116.096 102.399L116.302 102.585C116.715 103.328 117.335 102.028 117.748 102.771C117.748 102.771 118.987 102.399 118.987 102.585L119.607 103.328C120.227 102.957 121.259 102.399 121.879 102.214H122.499H123.944C125.597 102.214 127.249 102.028 128.075 101.842H128.695H129.314C130.14 101.656 130.478 101.285 131.717 101.099C132.956 100.913 134.609 100.728 135.228 100.728L135.848 100.542L136.261 100.356C136.674 100.17 137.707 99.9847 137.913 99.9847C138.12 99.9847 138.946 99.6133 139.359 99.4276L139.359 99.4275C139.772 99.2417 140.185 99.2417 140.185 99.2417C140.392 99.2417 140.805 99.2417 141.218 99.4275L141.011 99.056C140.185 97.9415 140.185 97.9415 140.185 97.9415C139.152 96.827 138.533 95.7124 138.533 95.7124C138.533 95.7124 139.359 95.341 140.185 94.7837L139.152 93.6692L138.739 93.2977C138.946 92.9262 139.152 92.1832 139.359 91.8117L138.946 91.4402L138.533 91.2544C138.533 90.8829 138.326 90.1399 138.326 89.7684V89.3969V88.6539C137.707 88.6539 138.533 88.2824 138.739 87.9109C139.152 87.5394 139.772 86.7964 140.392 86.2392L139.359 85.8676C138.12 85.4961 137.913 84.9389 138.739 84.1959L139.152 83.8244C139.152 83.2671 138.533 82.3384 138.326 82.1526C137.913 81.9669 137.913 81.5954 137.913 81.5954C137.913 81.5954 138.12 81.2239 138.326 81.2239C138.326 81.2239 138.326 80.6666 138.533 80.4809C138.739 80.2951 139.979 79.7379 140.185 79.3664C140.598 79.1806 140.598 78.8091 140.392 78.6233H140.185C139.566 78.4376 139.152 78.2518 138.946 77.6946L138.739 77.1373C138.946 76.5801 139.772 76.2086 139.979 76.2086C140.185 76.2086 140.805 75.2798 141.011 75.2798C141.218 75.2798 141.837 75.4656 141.837 75.6513C142.044 75.8371 143.283 75.4656 143.696 75.2798C144.109 75.0941 143.696 74.9083 143.49 74.9083C143.283 74.9083 141.837 75.2798 141.837 74.9083C141.837 74.5368 141.631 74.3511 141.631 74.3511C141.631 74.3511 140.598 74.7226 140.392 74.5368C140.185 74.3511 139.566 73.9796 139.359 73.7938C139.152 73.6081 139.979 73.6081 140.392 73.6081H142.044C142.251 73.4223 143.283 73.6081 143.49 73.7938C143.696 73.9796 143.696 73.7938 143.49 73.2366L143.283 72.8651C143.077 72.6793 143.077 72.6793 143.077 72.6793C143.077 72.4936 144.523 72.1221 144.729 71.7506C144.936 71.3791 144.522 70.6361 144.316 70.4503C144.109 70.2645 144.109 69.893 144.316 69.3358L144.522 68.9643L144.936 68.2213C143.903 67.8498 143.903 67.664 144.936 67.664V67.8498L145.142 68.2213C145.555 68.407 146.175 68.2213 146.175 67.8498L145.762 67.664C145.762 67.664 145.968 67.4783 145.968 67.2925C146.381 66.7353 146.175 66.5495 145.349 66.5495H145.142C144.729 66.3638 144.729 65.9923 144.936 65.9923C145.142 65.8065 145.349 65.435 145.762 65.0635L145.555 64.692C144.936 63.7633 144.316 63.206 143.696 63.3918H143.49C143.283 63.5775 142.87 63.0203 142.664 62.8345C142.457 62.6488 143.49 61.9057 143.696 61.72C143.903 61.5342 142.664 61.3485 142.457 61.1627C142.251 60.977 142.251 60.4197 142.457 60.234C142.457 60.0482 142.87 59.8625 143.077 59.8625L143.49 60.0482C143.903 60.4197 144.729 60.234 144.729 60.234C144.729 60.234 144.316 59.491 144.109 58.9337C143.903 58.1907 143.283 57.8192 142.664 58.005L142.457 57.8192L142.044 57.0762C142.87 56.519 142.87 55.9617 142.664 55.9617C142.457 55.776 141.631 55.9617 141.011 56.3332L140.836 56.1753L140.392 55.776C140.392 55.776 140.185 55.9617 140.185 56.3332L139.979 56.519L139.772 56.8905C139.359 57.262 138.326 57.262 138.12 57.0762C137.707 56.8905 138.12 56.3332 138.946 55.5902L139.152 55.033C139.152 54.4757 138.533 53.9184 138.326 53.3612C138.326 53.1754 139.566 54.1042 139.979 54.29C140.392 54.6615 141.218 54.4757 141.424 54.29C141.631 54.29 142.87 54.29 143.077 54.4757C143.283 54.6615 143.49 54.4757 143.283 53.9185V53.547C143.077 52.9897 143.077 52.9897 143.077 52.9897C142.457 52.9897 141.631 52.9897 141.011 52.8039V52.6182V51.6894C140.598 52.0609 139.979 51.8752 139.772 51.5037H139.566C138.533 51.6894 138.946 50.9464 138.533 50.7607L138.326 50.5749C137.913 50.5749 136.467 50.3892 136.467 50.0177C136.467 49.6462 136.674 48.9032 136.88 48.7174C137.087 48.5317 137.477 48.6469 137.849 48.7091C138.75 48.8597 138.866 50.2034 139.692 50.0177C140.312 50.0177 142.17 49.6462 142.583 49.8319C142.997 50.0177 143.616 50.2034 144.029 50.2034C144.442 49.6462 144.855 50.3892 145.269 50.2034C145.682 50.0177 145.682 50.0177 145.682 50.0177C145.888 50.0177 145.475 49.2747 145.269 49.0889C145.062 48.9032 144.649 47.7887 145.062 47.6029C145.475 47.4172 144.855 45.3739 144.649 44.8166C144.236 44.0736 144.236 42.9591 144.649 42.9591C145.062 42.9591 146.095 42.7734 146.714 42.5876L146.921 42.0304L147.127 41.6589C147.127 41.1016 147.747 40.9159 148.573 41.2874H149.193H149.812C150.432 40.9159 150.432 40.5444 149.812 40.3586L149.193 40.1729C148.986 40.1729 148.78 39.9871 148.78 39.8014C148.78 39.6156 148.986 39.4299 149.193 39.4299C150.019 39.6156 150.432 39.2441 150.845 38.8726C151.052 38.6869 151.052 38.5011 150.845 38.3154C150.639 38.1296 150.225 38.1296 150.019 38.1296H149.812C149.606 38.3154 149.399 37.9439 149.399 37.2008L148.573 36.8293C148.16 36.6436 147.953 36.2721 147.747 35.9006C147.54 35.3433 147.954 34.7861 148.78 34.9718H149.193C149.193 34.7861 148.367 33.3001 147.54 33.3001C146.921 33.3001 145.269 33.4858 144.855 33.3001C144.442 33.1143 144.029 33.1143 143.616 33.1143H143.203H142.583C141.964 33.3001 141.551 32.3713 141.551 32.1856C141.551 31.9998 142.997 31.6283 143.41 31.6283C143.823 31.6283 143.41 31.4426 142.377 31.2568H141.551C140.518 31.2568 145.762 29.9566 146.175 29.2136L146.588 28.4706C146.381 27.7275 145.762 26.2415 145.968 25.87C146.175 25.4985 145.762 25.127 145.142 24.9413L144.936 24.7555C144.316 24.1983 144.109 25.6843 143.49 24.7555L143.283 24.384C142.87 24.0125 142.251 23.641 142.044 23.641C141.838 23.641 143.076 23.2697 143.696 23.0839L143.696 23.0838C144.109 23.0838 144.109 20.2975 143.49 19.183C143.077 18.2542 144.522 18.0685 145.142 18.2542C145.762 18.44 146.175 18.2542 146.175 17.697L145.968 17.5112L145.555 17.1397C145.142 16.7682 144.729 16.211 144.729 16.0252C144.729 15.8395 144.316 15.8395 143.903 15.8395H143.49L143.283 16.0252H142.87V15.6537C143.283 15.468 143.283 15.468 143.283 15.468C143.696 15.2822 144.109 15.0965 144.109 14.9107C144.109 14.725 143.903 14.725 143.696 14.725H143.49H143.283C143.077 14.725 142.664 13.982 142.457 13.0532L142.251 12.3102V11.9387C142.251 11.5672 142.457 10.8242 142.664 10.4527L141.837 10.2669C142.044 9.89543 141.838 9.52393 141.631 9.52393C141.424 9.52393 140.598 9.33818 139.772 8.96668L139.566 8.59518C139.359 7.85217 138.12 7.66642 137.913 7.29492L137.707 6.36616C136.881 6.18041 134.609 5.43741 133.782 5.62316C132.956 5.80891 132.337 5.25166 132.337 5.06591C132.337 4.88015 131.717 4.88015 131.51 4.88015C131.304 4.88015 133.445 4.13715 132.619 4.13715H130.76C130.554 4.13715 129.314 4.6944 129.314 4.3229C129.314 3.9514 128.695 4.13715 128.488 4.13715C128.075 4.13715 127.042 3.9514 126.629 3.9514C126.423 3.9514 124.357 3.76565 123.738 3.5799L123.738 3.57986C123.118 3.3941 121.879 3.02263 120.846 2.83689L120.433 2.09389C120.433 1.90814 119.607 1.72239 119.194 1.72239C118.987 1.53663 118.574 1.90814 118.368 1.90814C117.542 1.72238 118.781 1.53663 118.368 1.35088C117.748 0.979381 116.715 0.607879 116.302 0.79363C115.476 1.16513 114.65 0.79363 114.237 0.607878C112.998 0.050625 111.552 -0.135126 110.313 0.236376C109.28 0.607878 109.28 0.607878 109.28 0.607878C108.66 0.236376 108.247 0.422127 108.041 1.16513L106.802 0.422127L106.182 0.0506251C104.323 0.0506251 103.29 0.236376 103.29 0.422127C103.29 0.607879 102.051 0.607879 101.638 0.422127C101.432 0.236376 100.399 0.0506249 100.192 0.236376C99.9857 0.422127 98.7465 0.0506252 98.953 0.422127C99.1595 0.79363 97.9203 0.607879 97.7137 0.422127C97.3007 0.236376 96.268 -0.135126 96.0615 0.0506251C95.8549 0.236376 95.6484 0.236376 95.4419 0.236376C95.2354 0.236376 94.8223 0.607879 94.2026 0.979381L93.1699 0.607878L92.3438 0.422127L88.812 1.95587C88.1923 2.14162 86.9531 2.32737 86.7466 2.32737C86.54 2.32737 84.2681 1.39861 83.2354 1.58437C82.4092 1.77012 81.3765 1.95587 81.17 2.14162H80.9635C80.5504 2.32737 79.9308 2.51312 79.7242 2.51312L78.485 1.58437C78.6915 2.32737 78.2785 2.51312 78.0719 2.51312C77.8654 2.51312 76.6261 2.51312 76.6261 2.69887C76.6261 2.88462 75.8 2.69887 75.3869 2.69887C74.9738 2.69887 74.1477 2.69887 73.528 2.88462L73.3215 2.69887L72.0823 1.77012C71.8757 2.51312 71.6692 2.88462 71.4626 2.88462C71.2561 2.88462 70.843 3.25613 70.6365 3.44188C70.4299 3.62763 69.8103 3.25613 69.3973 2.51312L68.5711 3.25613L68.3646 3.44188C68.158 3.44188 67.1253 3.62763 66.2992 3.81338L65.6796 4.18488H65.473C65.2665 3.99913 65.2665 3.81338 65.0599 3.62763C64.8534 3.44188 64.8534 3.44188 64.6469 3.62763L64.4403 3.81338L64.2338 3.99913C64.2338 4.18488 63.8207 3.99913 63.6142 3.81338C63.6142 3.62763 62.3749 3.99913 61.9618 3.99913H59.4834H58.4507H58.2441H57.831C57.418 4.18488 56.5918 4.55638 55.9722 4.74213L55.3526 4.55638L54.733 3.81338C54.1133 4.18488 52.6676 4.18488 51.8414 3.99913V4.92789C51.8414 4.92789 49.9825 4.37063 49.3629 4.74213C48.7433 5.11364 48.1237 5.48514 47.9172 5.48514C47.7106 5.48514 46.8845 5.11364 45.8518 4.92789L45.6452 5.11364C45.2321 5.67089 44.406 4.92789 43.7864 5.48514C43.7864 5.67089 42.7537 6.22814 42.134 5.48514L41.5144 5.67089C41.5144 6.41389 41.3079 5.85664 40.2752 5.85664L39.8621 5.67089C39.2425 5.67089 36.5575 5.29939 35.7313 5.48514C35.1117 5.67089 34.2855 5.85664 34.079 5.85664V6.7854C33.2529 6.59964 32.4267 6.22814 32.0136 6.22814V6.59964V6.7854C32.0136 6.7854 30.9809 6.41389 30.7744 6.59964C30.3613 6.7854 29.5351 6.97115 29.1221 6.7854C28.709 6.59964 28.0894 7.34265 27.8828 7.71415C27.6763 7.8999 27.0567 7.8999 26.8501 7.71415C26.6436 7.5284 25.6109 7.34265 25.1978 7.34265C24.7847 7.34265 24.1651 8.08565 23.752 7.8999C23.5455 7.71415 22.7193 7.71415 22.0997 7.71415L21.6866 8.08565L21.2736 8.45716C21.067 9.01441 20.0343 8.64291 19.6212 8.45716C19.4147 8.2714 17.5559 8.64291 17.1428 8.45716C16.7297 8.2714 16.1101 8.2714 15.697 8.2714L15.4905 8.45716L15.0774 8.82866C14.6643 9.38591 13.6316 9.57166 13.4251 9.20016C13.2185 8.82866 12.8054 9.20016 12.8054 9.38591C12.8054 9.57166 12.1858 9.38591 11.9793 9.57166C11.7727 9.75741 11.5662 9.75741 11.3597 9.75741H11.1531C10.7401 9.57166 10.327 9.57166 9.91389 9.57166C9.91389 9.57166 10.327 9.94316 10.5335 9.94316C10.7401 9.94316 10.1204 10.5004 9.08774 10.8719L8.67466 10.3147L8.05504 9.38591C7.22888 9.75741 6.19618 10.5004 6.19618 10.6862C6.19618 10.8719 5.57657 10.8719 4.75041 10.3147L4.13079 10.8719C3.51117 11.6149 2.89155 11.6149 2.06539 11.0577C1.85886 11.2434 2.27193 12.1722 2.06539 12.5437C1.85886 12.9152 0.826158 12.9152 0.619618 12.9152C0.413079 12.9152 0.413079 13.1009 0.619618 13.2867V13.4724C0.619618 13.6582 0.413079 13.8439 0.413079 14.0297L0.206539 14.7727C0.619618 15.33 0.826158 16.073 0.826158 16.073L0 16.4445V16.6302C0.206539 17.3732 0.826158 16.6302 0.826158 16.6302C1.0327 16.816 1.85886 16.816 1.44578 17.3732L1.0327 18.1162C1.85886 17.7447 2.47847 17.9305 2.47847 18.4877V18.6735C2.27193 19.4165 2.27193 19.9737 3.71771 19.788L4.13079 19.9737C4.33733 20.531 4.54387 21.274 4.54387 21.8312L4.75041 22.2027V22.3885C4.95695 22.5742 5.98964 23.3173 7.02234 24.0603L6.8158 25.9178V26.1035C7.02234 26.475 7.8485 26.6608 8.67466 26.6608H9.50082H9.91389C10.7401 26.475 10.7401 26.8465 10.1204 27.4038L9.70735 27.7753C9.91389 27.961 10.1204 27.961 10.327 27.961H10.5335H10.7401C10.9466 27.961 11.3597 28.1468 11.3597 28.3325V28.5183V28.704C11.1531 29.0755 10.5335 30.0043 10.7401 30.3758L11.1531 31.1188C11.1531 31.1188 11.3597 31.4903 11.5662 31.4903C11.9793 31.4903 5.21852 32.2333 4.80545 33.7193L7.697 33.9051C7.90354 33.9051 8.31662 34.6481 8.11008 35.0196V35.3911C7.49046 35.3911 5.83814 35.0196 5.6316 35.2053C5.42506 35.3911 5.83814 36.1341 6.04468 36.3198C6.25122 36.5056 7.697 36.3198 8.11008 36.1341C8.52316 36.1341 9.14278 35.9483 9.34932 35.7626L9.55585 35.5768L9.76239 35.3911C9.76239 35.3911 10.1755 35.3911 10.382 35.5768C10.5886 35.7626 11.0016 36.1341 11.2082 36.6913L10.7951 37.2486C11.0016 37.4343 12.6539 44.2594 13.2736 44.4451C13.8932 44.6309 14.5128 38.1773 14.9259 37.8058C14.9259 37.8058 14.9259 44.0736 14.7193 44.6309C14.9259 45.0024 14.9259 45.1881 15.5455 45.1881L16.7847 45.0024C18.024 45.3739 19.6763 45.9311 19.8828 45.9311C20.0894 45.9311 21.3286 45.7454 21.7417 45.9311C21.9482 46.1169 21.3286 46.4884 19.8828 47.0457L20.0894 48.3459C20.0894 48.5317 19.8828 48.5317 19.6763 48.5317L18.8501 48.7174C18.437 49.2747 18.024 50.2034 18.2305 50.3892C18.4371 50.5749 19.0567 50.3892 19.2632 50.3892C19.4697 50.3892 19.4697 50.5749 19.4697 50.7607V50.9464V51.1322C19.4697 51.3179 19.6763 51.3179 20.2959 51.1322L20.709 50.9464H20.9155C21.3286 50.9464 21.5351 51.3179 21.5351 51.5037C21.5351 51.6894 19.6763 52.2467 19.0567 51.8752C18.4371 51.5037 17.8174 51.5037 17.8174 51.6894V51.8752L18.024 52.4324C18.2305 52.9897 18.2305 53.9184 18.024 54.4757L18.4371 55.033L18.6436 55.2187C19.0567 55.4045 19.6763 55.5902 20.2959 55.5902V56.3332V56.7047C20.9155 57.0762 20.709 57.6335 20.5024 57.6335C20.2959 57.6335 22.5678 59.1195 22.3613 59.6767C22.1548 60.234 22.9809 60.977 23.394 61.1627C23.8071 61.3485 22.7744 62.0915 22.1548 62.0915H20.0894C19.6763 62.0915 18.437 62.6488 18.024 62.463C17.6109 62.2773 17.1978 62.2773 16.9913 62.2773C16.7847 63.3918 15.9586 62.6488 15.339 62.463H15.1324C14.7193 62.6488 14.9259 63.0203 14.9259 63.0203C14.9259 63.206 13.6866 63.5775 13.2736 63.3918C12.8605 63.0203 12.2409 63.7633 12.2409 64.1348C12.2409 64.5063 11.6212 64.3205 11.4147 64.3205C11.4147 64.1348 10.5886 63.5775 10.382 63.7633C10.1755 63.949 9.76239 64.3205 9.55585 64.3205C9.34931 64.3205 8.31662 64.5063 7.90354 64.5063C7.697 64.5063 7.07738 65.0635 6.87084 65.0635C6.6643 65.0635 6.25122 65.435 5.42506 65.6208V65.8065C5.21852 66.7353 13.012 67.664 12.8054 68.5928V68.9643C13.012 69.3358 12.5989 69.893 11.9793 70.0788L11.7727 69.3358C11.5662 68.9643 10.9466 68.5928 10.7401 68.5928L9.29428 68.7785C8.05504 68.2213 5.57656 69.3358 4.54387 69.5215C3.51117 69.7073 3.51117 70.0788 4.33733 70.0788L4.54387 70.2645C4.75041 70.636 4.95695 70.8218 5.57656 71.0075C5.98964 71.0075 5.98964 71.9363 5.16349 72.3078C4.95695 72.3078 4.75041 72.3078 4.54387 72.4936C4.33733 72.6793 4.13079 73.0508 4.13079 73.2366V73.4223C4.75041 73.6081 4.75041 73.7938 4.33733 73.7938V73.9796C3.92425 74.5368 3.51117 73.6081 3.09809 73.9796L1.65232 75.2798C1.44578 75.4656 1.44578 75.6513 1.44578 75.8371L1.23924 76.3943C1.85886 76.9516 2.68501 77.3231 3.09809 77.1373C3.09809 77.1373 3.09809 77.1374 3.51117 76.9516L3.92425 76.7658C4.54387 76.5801 4.54387 78.4376 3.71771 78.6233C2.89155 78.8091 2.27193 79.9236 2.27193 80.2951C2.27193 80.4809 2.68501 81.4096 3.09809 82.1526V82.8956V83.0814C2.89155 83.4529 3.30463 83.4529 3.92425 83.2671H4.13079L4.54387 83.4529C4.33733 83.8244 3.92425 84.1959 3.92425 84.5674L4.13079 84.9389L4.75041 85.4961C5.16349 85.1246 5.7831 84.9389 5.7831 84.9389C5.98964 84.9389 5.57657 86.7964 5.37003 87.3537C5.16349 87.9109 5.16349 89.5827 5.57656 89.7684C5.98964 89.9542 6.8158 89.9542 7.22888 89.7684H7.64196H8.05504C8.46812 89.9542 8.05504 91.2544 7.43542 91.6259C6.8158 91.9974 6.19618 92.5547 5.7831 92.7404L6.19618 92.9262C6.60926 93.1119 6.60926 93.2977 6.19618 93.4834C5.7831 93.6692 5.37003 93.8549 4.95695 93.8549C4.13079 93.8549 4.75041 94.2264 4.75041 94.4122C4.75041 94.7837 4.13079 95.1552 5.37003 95.1552C5.7831 95.1552 6.60926 95.1552 7.43542 94.7837C7.64196 94.5979 8.05504 94.5979 8.26158 94.7837L8.46812 94.9694C8.67466 95.341 9.08774 95.3409 9.29428 95.3409C9.50081 95.1552 10.5335 95.7124 10.9466 95.7124C11.3597 95.7124 12.3924 96.0839 12.5989 96.2697C12.5989 96.4555 13.4251 96.827 14.0447 97.0127L14.6643 96.827C14.8708 96.6412 15.2839 96.827 15.2839 97.0127L15.4905 98.1272C16.5232 98.1272 19.2082 97.9415 19.8278 97.9415H21.4801C21.6866 97.9415 23.1324 98.1272 24.9913 98.313L26.2305 99.4275C26.4371 99.2417 28.5024 99.6132 28.709 99.9847C28.9155 100.356 30.1548 100.17 30.5678 100.17C31.1875 100.17 32.8398 100.728 33.4594 100.728C33.8725 100.728 35.9379 100.728 36.5575 101.099C37.1771 101.285 37.5902 101.285 37.7967 101.099H38.0033L38.8294 100.913C38.6229 101.285 39.036 101.471 39.449 101.471H39.8621C39.8621 101.471 40.0687 101.656 40.0687 101.842V102.028C40.0687 102.585 40.8948 102.028 41.1014 101.842C41.3079 101.656 42.134 101.656 42.3406 101.842C42.5471 101.842 42.3406 102.214 41.721 102.399V102.585C41.721 103.142 42.5471 102.957 42.9602 102.957C43.1667 102.957 43.1667 102.771 43.3733 102.585L43.5798 102.399C43.5798 102.399 44.6125 102.771 44.8191 102.585C45.0256 102.399 45.8518 102.771 46.0583 102.957C46.2648 103.142 48.3302 102.585 48.7433 102.771C49.1564 102.957 49.776 103.328 50.1891 103.328L50.3956 103.143L50.8087 102.957C51.2218 102.585 52.6676 102.957 53.2872 102.957C53.9068 102.957 54.733 102.771 54.9395 102.771H56.7984L57.418 102.585C58.4507 102.214 58.4507 103.328 59.2768 103.143C59.2768 102.957 60.5161 102.399 60.5161 102.771C60.5161 103.142 60.7226 103.142 60.7226 102.957C60.9291 102.771 61.5488 103.142 61.7553 102.957C61.9618 102.771 62.788 102.214 63.2011 102.214C63.6142 102.214 64.2338 102.771 64.2338 102.957C64.2338 103.142 64.8534 102.771 65.0599 102.585C65.2665 102.399 65.6796 102.957 66.0926 103.7L66.5057 103.143C67.3319 102.214 67.5384 102.399 68.3646 102.957C68.5711 103.142 68.9842 103.143 68.9842 103.143C69.8103 102.585 70.2234 103.142 70.6365 103.328C71.0496 103.514 71.4626 103.514 71.8757 103.7L72.7019 103.886L72.7023 103.885C73.5283 103.7 74.3542 103.514 74.5607 103.514C74.5607 103.514 75.3869 103.142 75.5934 103.328C75.8 103.514 76.2131 103.328 76.4196 103.143C76.6261 102.957 77.0392 102.957 77.2458 102.957L77.4523 103.143L77.6588 103.328C77.8654 103.514 78.6915 103.328 78.8981 103.143C79.1046 102.957 79.5177 103.142 79.5177 103.328C79.7242 103.328 81.3765 103.143 81.9962 103.143H84.0616C84.2681 103.143 85.7139 102.771 86.9531 102.585L88.3989 103.328Z"/>\n' +
  "</svg>\n";

let deleteSvg =
  '<svg width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n' +
  '<path d="M1 3.23975H2.17073H13" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>\n' +
  '<path d="M3.94779 3.24V2.12C3.94779 1.82296 4.07039 1.53808 4.28862 1.32804C4.50684 1.118 4.80282 1 5.11143 1H8.89327C9.20188 1 9.49786 1.118 9.71608 1.32804C9.93431 1.53808 10.0569 1.82296 10.0569 2.12V3.24M11.8024 3.24V13.88C11.8024 14.177 11.6798 14.4619 11.4615 14.672C11.2433 14.882 10.9473 15 10.6387 15H3.36597C3.05736 15 2.76138 14.882 2.54315 14.672C2.32493 14.4619 2.20233 14.177 2.20233 13.88V3.24H11.8024Z" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>\n' +
  '<path d="M5.5 7.99976V11.3599" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>\n' +
  '<path d="M8.5 7.99976V11.3599" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>\n' +
  "</svg>\n";

const canvas = document.createElement("canvas");
canvas.id = "canvas";
const ctx = canvas.getContext("2d");
const reader = new FileReader();
const img = new Image();

function magnify() {
  let glass,
    color,
    w,
    h,
    zoom = 3;
  glass = document.createElement("DIV");
  color = document.createElement("DIV");
  glass.setAttribute("class", "img-magnifier-glass");
  color.setAttribute("class", "img-magnifier-color");

  canvas.parentElement.insertBefore(color, canvas);
  canvas.parentElement.insertBefore(glass, canvas);

  glass.style.backgroundImage = "url('" + img.src + "')";
  glass.style.backgroundRepeat = "no-repeat";

  glass.style.backgroundSize =
    canvas.width * zoom + "px " + canvas.height * zoom + "px";
  w = glass.offsetWidth / 2;
  h = glass.offsetHeight / 2;

  glass.addEventListener("mousemove", moveMagnifier);
  color.addEventListener("mousemove", moveMagnifier);
  canvas.addEventListener("mousemove", moveMagnifier);
  canvas.addEventListener("mouseout", function() {
    glass.style.opacity = "0";
    color.style.opacity = "0";
  });

  function moveMagnifier(e) {
    let pos, x, y;
    e.preventDefault();

    pos = getCursorPos(e);
    x = pos.x;
    y = pos.y;

    glass.style.opacity = "1";
    color.style.opacity = "1";

    if (y < 0 || y > canvas.height || x > canvas.width || x < 0) {
      glass.style.opacity = "0";
      color.style.opacity = "0";
    }

    let pixel = ctx.getImageData(x, y, 1, 1);
    color.style.background = rgb2hex(
      pixel.data[0],
      pixel.data[1],
      pixel.data[2],
      pixel.data[3]
    );

    color.style.left = x - w - 10 + "px";
    color.style.top = y - h - 10 + "px";
    glass.style.left = x - w + "px";
    glass.style.top = y - h + "px";
    glass.style.backgroundPosition =
      "-" + (x * zoom - w) + "px -" + (y * zoom - h) + "px";
  }

  function getCursorPos(e) {
    let a, x, y;
    e = e || window.event;
    a = canvas.getBoundingClientRect();
    x = e.pageX - a.left;
    y = e.pageY - a.top;
    x = x - window.pageXOffset;
    y = y - window.pageYOffset;
    return { x: x, y: y };
  }
}

function uploadImage(e) {
  reader.onload = function() {
    img.onload = function() {
      const width = 600;
      const height = 600;
      let ratioX = width / img.width;
      let ratioY = height / img.height;
      let ratio = Math.min(ratioX, ratioY);
      canvas.width = img.width * ratio;
      canvas.height = img.height * ratio;

      ctx.drawImage(img, 0, 0, img.width * ratio, img.height * ratio);
      deleteElement("img-magnifier-glass");
      deleteElement("img-magnifier-color");
      magnify();
    };
    document.getElementById("color-click_wrapper").style.display = "flex";

    img.src = reader.result;
    document.getElementById("canvas_wrapper").appendChild(canvas);
  };
  e.target ? reader.readAsDataURL(e.target.files[0]) : reader.readAsDataURL(e);
}

function verifyImg(e) {
  let arr = e.target ? e.target.files[0].name.split(".") : e.name.split(".");
  let type = arr[arr.length - 1];

  try {
    if (
      type.toUpperCase() === "JPG" ||
      type.toUpperCase() === "SVG" ||
      type.toUpperCase() === "PNG"
    ) {
      uploadImage(e);
    } else throw new Error(type);
  } catch (e) {
    alert(
      "Тип файла:" + e.message + ", требуется файл формата .jpg,.png,.svg."
    );
  }
}

let dropzone = document.getElementById("dropzone");

dropzone.addEventListener("dragenter", function() {
  dropzone.className = "hover";
});

["drop", "dragleave"].forEach(function(eventName) {
  dropzone.addEventListener(eventName, function() {
    dropzone.className = "";
  });
});

["drop", "dragover"].forEach(function(eventName) {
  dropzone.addEventListener(
    eventName,
    function(e) {
      e.preventDefault();
      e.stopPropagation();
      let files = e.dataTransfer.files;
      files = __spreadArrays(files);
      files[0] && verifyImg(files[0]);
    },
    false
  );
});

document.getElementById("uploader").addEventListener("change", verifyImg);

canvas.addEventListener("click", function(e) {
  let pixel = ctx.getImageData(e.offsetX, e.offsetY, 1, 1);
  let color = rgb2hex(
    pixel.data[0],
    pixel.data[1],
    pixel.data[2],
    pixel.data[3]
  );
  store.dispatch({
    type: "ADD_COLOR",
    hex: color
  });
});

store.subscribe(function() {
  deleteElement("color_item");
  const colorsWrapper = document.createElement("div");
  colorsWrapper.id = "colors_wrapper";

  document.getElementById("left_wrapper").appendChild(colorsWrapper);

  store.getState().map(function(el) {
    const divForColor = document.createElement("div");
    divForColor.className = "color_item";

    const nameColor = document.createElement("div");
    nameColor.className = "color_name";
    nameColor.innerHTML = "HEX" + el.hex.toUpperCase();

    const svgForColor = document.createElement("span");
    svgForColor.innerHTML = colorSvg;
    svgForColor.style.color = el.hex;

    const svgForDeleteColor = document.createElement("div");
    svgForDeleteColor.innerHTML = deleteSvg;
    svgForDeleteColor.className = "delete";

    colorsWrapper.appendChild(divForColor);
    divForColor.appendChild(svgForColor);
    divForColor.appendChild(nameColor);
    divForColor.appendChild(svgForDeleteColor);

    svgForDeleteColor.addEventListener("click", function() {
      store.dispatch({
        type: "DELETE_COLOR",
        id: el.id
      });
    });
  });
});
